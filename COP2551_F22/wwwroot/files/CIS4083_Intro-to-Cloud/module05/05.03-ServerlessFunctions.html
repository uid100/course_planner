<!-- capstone course id: 455772 -->
<!--  serverless functions -->
<!-- assignment -->

<div id="serverless-functions" style="background:lightblue;">

    <div id="navigation" style="padding: 20px;">
        <a href="/courses/455772" style="color:navy;">
            <img src="/courses/455772/files/45593224/preview"
                 alt="simple cloud drawing" width="150" /><br />
            <em>home</em>
        </a>
    </div> <!-- #navigation -->

    <div id="assignment" style="padding:20px;">
        <div id="instructions">
            <h2 class="alert alert-info">Instructions</h2>

            <p>
                There are two parts to this exercise. You will create and test serverless
                functions in both AWS and Azure environments.
            </p>
            <p>
                Follow the detailed instructions below.
            </p>
        </div> <!-- #instructions -->

        <div id="lambda">
            <h2 class="alert alert-info">AWS Lambda</h2>

            <p>
                In this first part, from the AWS Console, you will create a Lambda function
                following the attached step-by-step instructions.
            </p>
            <p>
                As indicated, this demonstration is within the free tier on your cloud account.
               Follow the instructions as written. When you get to the section labeled:
            </p>
            <h3>Invoke Lambda function and verify results</h3>
            <p>
                ...
            </p>
            <p>
                Modify the Event JSON for your test event and change the <em>value</em> for 
                key 1 from <code>"value1"</code> to: <br />
                <code>"Good Morning Starshine, [YourAcctName] Says Hello!"</code>
            </p>
            <p>
                After clicking the <strong>[Test]</strong> button, the display should show
                <strong>Execution result: succeed</strong>. Expand the Details link
                and take a screenshot. <strong>(Part1)</strong>
            </p>
            <p>
                Finish follwowing the rest of the tutorial. Even though the function is 
                well within the free tier, it is still best practice to clean up the 
                account and delete the function, as outlined in the last part of the 
                tutorial.
            </p>
            <p class="ic-flash-info">
                https://aws.amazon.com/getting-started/hands-on/run-serverless-code/
            </p>
        </div> <!-- #lambda -->

        <div id="func-app">
            <h2 class="alert alert-info">Azure Function App</h2>
            <p>
                In the second part, create a serverless function using Azure Functions App
                service.
            </p>
            <p>
                For this demo, follow the instructions from this link:
            </p>
            <p class="ic-flash-info">
                https://www.claudiobernasconi.ch/2019/07/17/how-to-write-your-first-azure-function-app/
            </p>
            <p>
                The fun part is that these instructions are a few years old and the interface
                is an evolving project, so your experience won't look like the examples.
            </p>
            <p>
                Similar to the web app demo that we did, start with creating the function app,
                then open the app add the code.
            </p>
            <p>
                Here are a few notes.
            </p>
            <p>
                Create a new Function App resource:
                <ul>
                    <li>
                        The App name needs to be a unique name. Try azfunc<em>[username]</em>
                    </li>
                    <li>
                        I talked about resource groups in the last module. I like to name mine
                        "RG<em>[project_name]</em>" just to keep them together.
                    </li>
                    <li>
                        The .NET core 6 runtime stack should have long term support (LTS)
                    </li>
                </ul>
                Review and Create
            </p>
            <p>
                Open the new resource and choose Functions from the Functions menu group on the
                left and click on + Create.
            </p>
            <p>
                Develop in portal.
            </p>
            <p>
                Select the <strong>HTTP trigger</strong> template and give it a name. You can
                use the default (HttpTrigger1) if you want. Also, change the Authorization level
                to anonymous. More about this below.
            </p>
            <p>
                After you create the function, go to <strong>Code + Test</strong> in the
                <strong>Developer</strong> section of the menu and review. Click the
                Test/Run tab and <strong>Run</strong>
            </p>
            <p>
                The output "Hello, Azure..." should display. This is because the parameter
                <strong>name</strong> was assigned to 'Azure' in the Test pane.
            </p>
            <p>&nbsp;</p>
            <p>
                Click "Get function URL" copy it and paste it to a browser. When you follow
                the link you'll see a response that says that the function triggered and executed.
            </p>
            <p>
                <img style="display: block; margin-left: auto; margin-right: auto;"
                     src="https://courses.sfcollege.edu/courses/455772/files/46379784/preview"
                     alt="Azure Function App - working  without query string."
                     data-api-endpoint="https://courses.sfcollege.edu/api/v1/courses/455772/files/46379784"
                     data-api-returntype="File" />
            </p>
            <p>
                This is almost the correct result. The app is working, but we have not passed
                the correct parameters to it.
            </p>
            <p>
                At the end of the URL, add "?name=[name]" (query string) to the URL and see the changes.
            </p>
            <p>
                <img style="display: block; margin-left: auto; margin-right: auto;"
                     src="/courses/455772/files/46379794/preview" alt="result with query string" />
            </p>
            <p>
                Take a screenshot if this one. Be sure to size the window and capture area so that the
                URL and query string are clearly visible. You will need to resize the screen much smaller
                and then only capture the relevant parts of the screen. (<strong>Part 2</strong>)
            </p>
            <p style="font-style:italic;">
                Really. Imagine that I'm looking at this on an average size laptop and wearing reading
                glasses. Keep your screenshots reasonable. I don't need to see a lot of blank screen,
                zoom in the just the good parts. Take a look at my examples.
            </p>
            <p>
               <strong>Optional:</strong> Create another function and this time leave the authorization
               level on the default 'function.' When you get the Function URL, a key will be part of
               the URL.
            </p>
            <h3>
                Clean up
            </h3>
            <p>
                Don't forget to clean up your subscription and delete the Function App when you
                are finished.
            </p>
        </div> <!-- #func-app -->

        <div id="submit">
            <h2 class="alert alert-info">Submit</h2>
            Upload your (2) screenshots to the Canvas page.
        </div>

        <div id="footer" style="padding: 20px;">
            <p style="text-align: center;"><em>Use the [Next &gt;] button to continue.</em></p>
        </div> <!-- #footer -->

    </div> <!-- #assignment -->
</div> <!-- #serverless-functions -->
